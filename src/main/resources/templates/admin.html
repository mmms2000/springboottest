<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
</head>
<body>

<h2>All Users List — You are in Admin Page</h2>

<table border="1">
    <tr>
        <th>ID</th>
        <th>First</th>
        <th>Last</th>
        <th>Email</th>
        <th>Roles</th>
        <th>Actions</th>
    </tr>

    <tr th:each="u : ${users}">
        <td th:text="${u.id}"></td>
        <td th:text="${u.firstName}"></td>
        <td th:text="${u.lastName}"></td>
        <td th:text="${u.email}"></td>

        <!-- ROLES -->
        <td>
            <span th:if="${u.roles != null}">
                <span th:each="r : ${u.roles}"
                      th:text="${r.name} + ' '"></span>
            </span>
            <span th:if="${u.roles == null}">NO_ROLES</span>
        </td>

        <td>
            <a th:href="@{/admin/users/{id}/edit(id=${u.id})}">Edit</a>

            <form th:action="@{/admin/users/{id}/delete(id=${u.id})}"
                  method="post"
                  style="display:inline;">
                <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}" />
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
</table>

<br>
<hr>
<br>

<h2>Add User</h2>

<form th:action="@{/admin/users}"
      th:object="${user}"
      method="post">
Ï
    <!-- CSRF -->
    <input type="hidden"
           th:name="${_csrf.parameterName}"
           th:value="${_csrf.token}" />

    <input th:field="*{firstName}"
           placeholder="First name"
           required />

    <input th:field="*{lastName}"
           placeholder="Last name"
           required />

    <input th:field="*{email}"
           placeholder="Email"
           type="email"
           required />

    <input type="password"
           name="rawPassword"
           placeholder="Password"
           required />

    <br><br>

    <!-- ROLE CHECKBOXES -->
    <label>
        <input type="checkbox"
               name="roleName"
               value="ROLE_USER"
               checked />
        USER
    </label>

    <label>
        <input type="checkbox"
               name="roleName"
               value="ROLE_ADMIN" />
        ADMIN
    </label>

    <br><br>

    <button type="submit">Add</button>
</form>

<br>
<hr>
<br>

<!-- LOGOUT (AVAILABLE FROM THIS PAGE) -->
<form th:action="@{/logout}" method="post">
    <input type="hidden"
           th:name="${_csrf.parameterName}"
           th:value="${_csrf.token}" />
    <button type="submit">Logout</button>
</form>

</body>
</html>